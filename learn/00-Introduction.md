# 教學 00: 專案介紹與核心理念

歡迎來到 `mini-HIS` 專案的教學系列！

本專案是一個使用 TypeScript 開發的微型醫院資訊系統 (Hospital Information System)，其主要目的並非打造一個功能完整的商業系統，而是**展示一種強調類型安全的軟體開發方法**。我們將深入探討「先寫類型，再寫邏輯」的開發哲學，並大量運用代數資料類型 (Algebraic Data Types, ADT) 來建構一個穩固、可預測且易於維護的程式碼庫。

## 我們要解決什麼問題？

在傳統的軟體開發流程中，我們常常先思考業務邏輯，再定義資料結構。這種方式雖然直觀，卻容易在高複雜度的系統中引發問題：

- **隱藏的錯誤**：許多邊界情況或非法狀態轉換直到執行階段才會被發現。
- **不一致的資料**：資料的狀態與其應有的行為脫鉤，導致程式碼中充滿了防禦性檢查。
- **模糊的業務規則**：業務規則散落在程式碼的各個角落，難以理解與維護。

本專案將展示如何透過 TypeScript 強大的類型系統，在**編譯階段**就解決上述大部分問題。

## 核心哲學：先寫類型，再寫邏輯

我們將採用與傳統相反的開發流程：

1.  **優先定義類型系統**：我們將首先為系統中的每一個實體、狀態和操作結果定義精確的 TypeScript 類型。
2.  **讓類型引導邏輯**：一旦類型被定義，它們將成為我們實現業務邏輯的「藍圖」。編譯器會像一位嚴格的助理，時刻提醒我們是否處理了所有可能的情況。
3.  **將業務規則編碼為類型**：重要的業務規則將不再是註解或文件，而是直接體現在類型定義中，使其成為系統不可分割的一部分。

這種方法的優勢顯而易見：

- **提早發現錯誤**：在您寫下第一行邏輯程式碼之前，許多潛在的錯誤就已經被類型系統捕捉。
- **程式碼即文件**：清晰的類型定義本身就是最好的文件，準確地描述了資料的結構與約束。
- **降低心智負擔**：您不再需要記住各種隱性的規則，因為類型會引導您做出正確的實現。

## 關鍵技術：代數資料類型 (ADT)

代數資料類型是源自函數式程式設計的重要概念，它能幫助我們精確地 моделировать 複雜的資料結構。在 TypeScript 中，我們主要透過**標籤聯合類型 (Tagged Union Types)** 來實現 ADT。

例如，我們可以用 ADT 來表示一個病患所有可能的狀態：

```typescript
// 病患可能處於的幾種明確狀態
export type PatientState = 
  | { tag: 'Registered'; patientId: string; } // 已掛號
  | { tag: 'Admitted'; patientId: string; ward: string; }   // 已入院
  | { tag: 'Discharged'; patientId: string; dischargedAt: Date; }; // 已出院
```

透過這種方式，一個 `PatientState` 型別的變數**只能是**這三種狀態之一，絕無例外。這使得我們在處理病患邏輯時，可以利用 `switch` 陳述式安全地處理每種情況，並由 TypeScript 編譯器確保我們沒有遺漏任何一種可能。

## 教學大綱

在本系列教學中，我們將一步步完成以下內容：

1.  **專案結構解析**：了解各個檔案與模組的職責。
2.  **核心類型設計**：深入 `Result` ADT 與通用類型的設計理念。
3.  **模組詳解**：逐一分析病患、預約、處方等核心模組的類型設計與實現。
4.  **整合與實踐**：展示如何將所有模組串聯起來，完成一個完整的工作流程。

準備好了嗎？讓我們開始探索類型驅動開發的魅力吧！